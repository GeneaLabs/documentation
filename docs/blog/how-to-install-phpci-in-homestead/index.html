<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="description" content="Guide to installing and using PHPCI in a local Homestead environment.">

        <meta property="og:site_name" content="GeneaLabs"/>
        <meta property="og:title" content="How To Install PHPCI In Homestead | GeneaLabs"/>
        <meta property="og:description" content="Guide to installing and using PHPCI in a local Homestead environment."/>
        <meta property="og:url" content="https://genealabs.com/blog/how-to-install-phpci-in-homestead"/>
        <meta property="og:image" content="/assets/images/logo.png"/>
        <meta property="og:type" content="website"/>

        <meta name="twitter:image:alt" content="GeneaLabs">
        <meta name="twitter:card" content="summary_large_image">

        
        <title>GeneaLabs | How To Install PHPCI In Homestead</title>

        <link rel="home" href="https://genealabs.com">
        <link rel="icon" href="/favicon.ico">

            <meta property="og:title" content="How To Install PHPCI In Homestead" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://genealabs.com/blog/how-to-install-phpci-in-homestead"/>
    <meta property="og:description" content="Guide to installing and using PHPCI in a local Homestead environment." />

                    <!-- Insert analytics code here -->
        
        <link href="https://fonts.googleapis.com/css?family=Nunito+Sans:300,300i,400,400i,700,700i,800,800i" rel="stylesheet">
        <link rel="stylesheet" href="/assets/build/css/main.css?id=aeefb19f1a580f0eb7b4">

        
            </head>

    <body class="flex flex-col justify-between min-h-screen bg-gray-100 text-gray-900 leading-normal font-sans">
        <div id="app">
            <header class="flex items-center shadow bg-white border-b h-24 py-4" role="banner">
                <div class="container flex items-center mx-auto px-4 lg:px-8">
                    <div class="flex items-center">
                        <a href="/" title="GeneaLabs home" class="inline-flex items-center">
                            <img class="h-8 md:h-10 mr-3" src="/assets/images/genealabs_logo_new.png" alt="GeneaLabs logo" />
                        </a>
                    </div>

                        <div id="vue-search" class="flex flex-1 justify-end items-center">
        <search></search>

        <nav class="hidden lg:flex items-center justify-end text-lg">
            <a href="/blog"
            class="text-green-600 hover:text-green-900 lvl0   ml-6 "
        >
            Blog
        </a>
    
                <a href="/packages"
            class="text-green-600 hover:text-green-900 lvl0   ml-6 "
        >
            Packages
        </a>
    
                <a href="/about"
            class="text-green-600 hover:text-green-900 lvl0   ml-6 "
        >
            About
        </a>
    
                <a href="/contact"
            class="text-green-600 hover:text-green-900 lvl0   ml-6 "
        >
            Contact
        </a>
    
        </nav>

        <button class="flex justify-center items-center bg-blue-500 border border-blue h-10 mr-4 px-5 rounded-full lg:hidden focus:outline-none"
    onclick="navMenu.toggle()"
>
    <svg id="js-nav-menu-show" xmlns="http://www.w3.org/2000/svg"
        class="fill-current text-white h-9 w-4" viewBox="0 0 32 32"
    >
        <path d="M4,10h24c1.104,0,2-0.896,2-2s-0.896-2-2-2H4C2.896,6,2,6.896,2,8S2.896,10,4,10z M28,14H4c-1.104,0-2,0.896-2,2  s0.896,2,2,2h24c1.104,0,2-0.896,2-2S29.104,14,28,14z M28,22H4c-1.104,0-2,0.896-2,2s0.896,2,2,2h24c1.104,0,2-0.896,2-2  S29.104,22,28,22z"/>
    </svg>

    <svg id="js-nav-menu-hide" xmlns="http://www.w3.org/2000/svg"
        class="hidden fill-current text-white h-9 w-4" viewBox="0 0 36 30"
    >
        <polygon points="32.8,4.4 28.6,0.2 18,10.8 7.4,0.2 3.2,4.4 13.8,15 3.2,25.6 7.4,29.8 18,19.2 28.6,29.8 32.8,25.6 22.2,15 "/>
    </svg>
</button>

    </div>

                </div>

                    <button class="flex justify-center items-center bg-blue-500 border border-blue h-10 mr-4 px-5 rounded-full lg:hidden focus:outline-none"
    onclick="navMenu.toggle()"
>
    <svg id="js-nav-menu-show" xmlns="http://www.w3.org/2000/svg"
        class="fill-current text-white h-9 w-4" viewBox="0 0 32 32"
    >
        <path d="M4,10h24c1.104,0,2-0.896,2-2s-0.896-2-2-2H4C2.896,6,2,6.896,2,8S2.896,10,4,10z M28,14H4c-1.104,0-2,0.896-2,2  s0.896,2,2,2h24c1.104,0,2-0.896,2-2S29.104,14,28,14z M28,22H4c-1.104,0-2,0.896-2,2s0.896,2,2,2h24c1.104,0,2-0.896,2-2  S29.104,22,28,22z"/>
    </svg>

    <svg id="js-nav-menu-hide" xmlns="http://www.w3.org/2000/svg"
        class="hidden fill-current text-white h-9 w-4" viewBox="0 0 36 30"
    >
        <polygon points="32.8,4.4 28.6,0.2 18,10.8 7.4,0.2 3.2,4.4 13.8,15 3.2,25.6 7.4,29.8 18,19.2 28.6,29.8 32.8,25.6 22.2,15 "/>
    </svg>
</button>

            </header>

            <main role="main"
                class="w-full flex-auto relative"
            >
                    <section class="flex-auto w-full container mx-auto py-16 px-6">
        
        <h1 class="leading-none mb-2">How To Install PHPCI In Homestead</h1>

        <p class="text-gray-800 text-xl md:mt-0">Mike Bronner  •  April 8, 2015</p>

                                    <a
                    href="/blog/categories/laravel"
                    title="View posts in laravel"
                    class="inline-block bg-gray-300 hover:bg-blue-500-lighter leading-loose tracking-wide text-gray-900 uppercase text-xs font-semibold rounded mr-4 px-3 pt-px"
                >laravel</a>
                            <a
                    href="/blog/categories/package-development"
                    title="View posts in package-development"
                    class="inline-block bg-gray-300 hover:bg-blue-500-lighter leading-loose tracking-wide text-gray-900 uppercase text-xs font-semibold rounded mr-4 px-3 pt-px"
                >package-development</a>
                    
        <div class="border-b border-blue-200 mb-10 pb-4" v-pre>
            <p>PHPCI is a nifty little swiss-army-knife for your development toolbox. It provides continuous integration and connects to popular services like GitHub and BitBucket. It will monitor your source repositories for changes, and trigger a new build when it sees activity. Then it will let you know if anything went wrong or can be improved.</p>

<p>This comes in handy to improve your code quality and minimize errors and issues down the road. In the following section we’ll go through the process of installing PHPCI in Homestead.</p>

<p><strong>A word of caution</strong>: it can be unbearibly slow if you install it in the shared folders section. It also helps to have more than 1 processor assigned to Homestead to speed things up.</p>

<hr />

<h3>Pre-Requisites</h3>

<ul>
<li>Laravel Homestead 2.0 configured and running.</li>
</ul>

<hr />

<ol>
<li>Make sure Homestead is up and running:</li>
</ol>

<pre><code>homestead up
</code></pre>

<p>2&#46; Add a new database “phpci” to Homestead using your favorite SQL admin tool, maybe something like Sequel Pro:</p>

<p><img src="https://cdn-images-1.medium.com/max/1600/1*ugOhTEgnBzkk2YQb3tmJGQ.png" alt="" />Create PHPCI Database</p>

<p>3&#46; Open your Terminal, SSH into your homestead VM, and clone phpci to a dedicated folder outside of the shared folder:</p>

<pre><code>homestead ssh
cd ~
git clone [https://github.com/Block8/PHPCI.git](https://github.com/Block8/PHPCI.git)
</code></pre>

<p>4&#46; Get all the dependencies:</p>

<pre><code>cd ~/PHPCI
composer install
</code></pre>

<p>4&#46; Configure PHPCI:</p>

<pre><code>./console phpci:install
</code></pre>

<p>Using the following answers:</p>

<pre><code>******************
Welcome to PHPCI
******************
</code></pre>

<pre><code>Checking requirements… OK
</code></pre>

<pre><code>Please answer the following questions:
 — — — — — — — — — — — — — — — — — -
</code></pre>

<pre><code>Please enter your MySQL host [localhost]:
Please enter your MySQL database name [phpci]:
Please enter your MySQL username [phpci]: **homestead**
Please enter your MySQL password: **secret**
</code></pre>

<pre><code>Your PHPCI URL (“https://phpci.local" for example): **https://phpci.dev:8000**
</code></pre>

<pre><code>Setting up your database… OK
</code></pre>

<pre><code>Admin Email: **your@email.com**
Admin Name: **Your Name**
Admin Password: **yourpassword**
</code></pre>

<pre><code>User account created!
</code></pre>

<p>6&#46; Add cron job to automatically run builds:</p>

<pre><code>sudo env EDITOR=nano crontab -e
</code></pre>

<p>Add the following to the cron file:</p>

<pre><code>* * * * * sudo php /home/vagrant/PHPCI/console phpci:run-builds
</code></pre>

<p>7&#46; Update MySQL configuration:</p>

<pre><code>sudo nano /etc/mysql/my.cnf
</code></pre>

<p>(Continue, even if the file doesn’t exist.)
And add the following values in the <strong>[mysqld]</strong> section:</p>

<pre><code>[mysqld]
max_allowed_packet=64M
innodb_log_file_size=512M
innodb_log_buffer_size=768M
</code></pre>

<p>8&#46; Restart the MySQL service:</p>

<pre><code>sudo service mysql restart
</code></pre>

<p>9&#46; Update PHP configuration:</p>

<pre><code>sudo nano /etc/php5/cli/php.ini
</code></pre>

<p>With (leave as is if it is already larger than 1024M):</p>

<pre><code>memory_limit=1024M
</code></pre>

<p>10&#46; Let’s exit out of homestead:</p>

<pre><code>exit
</code></pre>

<p>11&#46; Edit homestead config:</p>

<pre><code>homestead edit
</code></pre>

<p>And add your new PHPCI site:</p>

<pre><code>sites:
  — map: phpci.dev
    to: /home/vagrant/PHPCI/public
</code></pre>

<p>12&#46; Update your hosts file:</p>

<pre><code>sudo nano /etc/hosts
</code></pre>

<p>And add the relevant entry:</p>

<pre><code>127.0.0.1       phpci.dev
</code></pre>

<p>13&#46; Now restart Homestead and provision it:</p>

<pre><code>homestead halt
homestead up --provision
</code></pre>

<p>14&#46; Open your browser and go to: <a href="http://phpci.dev:8000">http://phpci.dev:8000</a>.
You should now be able to log in using the email address and password specified in step #4.</p>

<p>15&#46; From here on in just follow all the same established PHPCI procedures as documented in their wiki: <a href="https://github.com/Block8/PHPCI/wiki">https://github.com/Block8/PHPCI/wiki</a></p>

<hr />

<p>In a future post I will discuss setting up a Laravel project and showing off all PHPCI can offer.</p>

<hr />

<h4>Updates</h4>

<ul>
<li><a href="https://twitter.com/egor_pe"><strong>Egor Pervuninski</strong></a> promptly converted these instructions to an <a href="https://github.com/eneset/homestead-phpci">Ansible deployment</a>. Nice job!</li>
</ul>
        </div>

        <nav class="flex justify-between text-sm md:text-base">
            <div>
                                    <a href="https://genealabs.com/blog/set-up-envoyer-on-an-existing-forge-site" title="Older Post: Set Up Envoyer On An Existing Forge Site">
                        &LeftArrow; Set Up Envoyer On An Existing Forge Site
                    </a>
                            </div>

            <div>
                                    <a href="https://genealabs.com/blog/creating-packages-with-laravel-5-and-studio" title="Newer Post: Creating Packages with Laravel 5 &amp; Studio">
                        Creating Packages with Laravel 5 &amp; Studio &RightArrow;
                    </a>
                            </div>
        </nav>
    </section>
            </main>
        </div>

        <script src="/assets/build/js/main.js?id=273dac163bb85281620e"></script>

        <script>
    const navMenu = {
        toggle() {
            let menu = document.getElementById('js-nav-menu');
            menu.classList.toggle('hidden');
            menu.classList.toggle('lg:block');
            document.getElementById('js-nav-menu-hide').classList.toggle('hidden');
            document.getElementById('js-nav-menu-show').classList.toggle('hidden');
            console.log(document.getElementById('js-nav-menu2'));
            //document.querySelector("js-nav-menu")
/*
            const menu2 = document.getElementById('js-nav-menu2');
            menu.classList.toggle('hidden');
            menu.classList.toggle('lg:block');
            document.getElementById('js-nav-menu-hide').classList.toggle('hidden');
            document.getElementById('js-nav-menu-show').classList.toggle('hidden');
            */
        },
    }
</script>
<script>
    const navMenu = {
        toggle() {
            let menu = document.getElementById('js-nav-menu');
            menu.classList.toggle('hidden');
            menu.classList.toggle('lg:block');
            document.getElementById('js-nav-menu-hide').classList.toggle('hidden');
            document.getElementById('js-nav-menu-show').classList.toggle('hidden');
            console.log(document.getElementById('js-nav-menu2'));
            //document.querySelector("js-nav-menu")
/*
            const menu2 = document.getElementById('js-nav-menu2');
            menu.classList.toggle('hidden');
            menu.classList.toggle('lg:block');
            document.getElementById('js-nav-menu-hide').classList.toggle('hidden');
            document.getElementById('js-nav-menu-show').classList.toggle('hidden');
            */
        },
    }
</script>

        <footer class="bg-white text-center text-sm py-4" role="contentinfo">
            <ul class="flex flex-col md:flex-row justify-center list-reset">
                <li class="md:mr-2">
                    &copy;
                    <a
                        class="text-green-600 hover:text-green-900"
                        href="https://genealabs.com"
                        title="GeneaLabs website"
                    >GeneaLabs</a>
                    2014 - 2020.
                </li>
                <li class="md:mr-2">
                    <a
                        class="text-green-600 hover:text-green-900"
                        href="https://genealabs.com/privacy-policy"
                        title="Privacy Policy"
                    >Privacy Policy</a>
                </li>
                <li class="md:mr-2">
                    <a
                        class="text-green-600 hover:text-green-900"
                        href="https://genealabs.com/terms-of-service"
                        title="Terms of Service"
                    >Terms of Service</a>
                </li>
                <li class="md:mr-2">
                    <a
                        class="text-green-600 hover:text-green-900"
                        href="https://genealabs.com/disclaimer"
                        title="Disclaimer"
                    >Disclaimer</a>
                </li>
            </ul>
        </footer>
    </body>
</html>
